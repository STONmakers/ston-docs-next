테스트 단계에서는 m2live를 적용하고자 하는 화면이면 최적화 진행, 그 외의 화면에는 미적용 예정입니다.
  어떻게?



1. html 가공이 없어서 화면에서 호출하는 path는 최적화 문자열이 없을텐데, 저희가 최적화 문자열을 직접 붙여줘야 하나요? 이미지 path만 전달하면 m2live에서 직접 처리하는지 궁금합니다.

방식은 3가지가 가능합니다.
- Browser <HTML>: 가장 명확합니다. (멜론, 컬리, 11번가 참조)
- CDN 서비스에서 캐싱키 변조를 지원한다면 캐싱키와 백엔드로 호출 명령어를 모두 변조하시면 됩니다.
- M2Live에서는 URL패턴, 헤더, IP, 프로토콜을 기반으로 규칙설정이 가능합니다. 단, 앞단에 CDN이 있는 만큼 CDN을 경유하였을 때 해당 정보가 유지되는 것이 보장되어야 합니다.


2. 최적화 규격의 정도를 저희가 정할 수 있는 방법이 있을까요? 같은 컨텐츠 대상으로도 화면/서비스별로 최적화 규격이 다를 수 있어 직접 핸들링 할 수 있는지 궁금합니다. (akamai IVM 사용 시 query string으로 aw, ah 값을 직접 지정하는 방식과 유사한?) 또한, default로 세팅되어 있는 최적화 규격은 어떻게 되는지 궁금합니다.

말씀하시는 "최적화 규격의 정도" 가 구체적으로 정의되어야 답을 드릴 수 있을 것 같습니다.
예를 들어 11번가의 경우 전시팀에서 아래와 같이 상황에 맞는 화질을 quality 명령으로 제어하고 있습니다.
https://cdn.011st.com/11dims/resize/600x600/quality/75/11src/dl/v2/9/5/6/7/1/0/Plbmi/3824956710_221035924.webp



3. m2live를 거치되, 강제로 원본 컨텐츠를 호출하는 방법이나 규약이 궁금합니다.

규약은 URL패턴, 헤더, IP, 프로토콜등으로 조합이 가능합니다.
아래 URL Rewrite 매뉴얼을 참고해 주십시오.
https://doc.m2live.co.kr/references/settings/hosting.html#urlrewrites



4. referer 헤더 등을 참조하여, 호출되는 컨텐츠의 최적화 여부를 m2live에서 판단/수행할 수 있는지 궁금합니다. CDN 레벨에서 컨트롤 할 수 있는지 검토중이나, m2live에서의 가능여부도 파악이 필요합니다.

앞서의 답변과 같이 룰만 있다면 가능합니다.
질문에도 언급주셨지만 CDN 레벨에서 컨트롤 하는 것이 더 중요해 보입니다.
referer에 따라 조건이 달라진다면 CDN에서는 같은 URL이라도 모두 다르게 캐싱해야 합니다.
CDN 관리비용이 높아지고 효율이 나빠지기 때문에 권장드리지는 않습니다.



---------------------------------------------------------
안녕하세요. 와인소프트 문우식입니다.
아키텍쳐 공유해주셔서 상황을 수월하게 이해할 수 있었습니다.

먼저 아래 플로우에서 고려하실 내용 짧게 의견드립니다.

​image.png​
1. 우측으로 갈수록, 컨트롤해야하는 레이어가 늘어나 무결성 보장비용과 복잡도가 증가합니다. 전선이 넓어집니다.
2. IVM을 대체하시는 정책이 정리되어야 합니다. (M2Live에서는 불가합니다.)


@김도영 선임님 문의주신 내용에 대해 답변 드립니다.

1. html 가공이 없어서 화면에서 호출하는 path는 최적화 문자열이 없을텐데, 저희가 최적화 문자열을 직접 붙여줘야 하나요? 이미지 path만 전달하면 m2live에서 직접 처리하는지 궁금합니다.
방식은 3가지가 가능합니다.
- Browser <HTML>: 가장 명확합니다. (멜론, 컬리, 11번가 참조)
- CDN 서비스에서 캐싱키 변조를 지원한다면 캐싱키와 백엔드로 호출 명령어를 모두 변조하시면 됩니다.
- M2Live에서는 URL패턴, 헤더, IP, 프로토콜을 기반으로 규칙설정이 가능합니다. 단, 앞단에 CDN이 있는 만큼 CDN을 경유하였을 때 반드시 무결성이 유지되어야 합니다.

2. 최적화 규격의 정도를 저희가 정할 수 있는 방법이 있을까요? 같은 컨텐츠 대상으로도 화면/서비스별로 최적화 규격이 다를 수 있어 직접 핸들링 할 수 있는지 궁금합니다. (akamai IVM 사용 시 query string으로 aw, ah 값을 직접 지정하는 방식과 유사한?) 또한, default로 세팅되어 있는 최적화 규격은 어떻게 되는지 궁금합니다.
말씀하시는 "최적화 규격의 정도" 를 먼저 정의해주십시오.
예를 들어 11번가의 경우 전시팀에서 아래와 같이 상황에 맞는 화질을 quality 명령으로 제어하고 있습니다.
https://cdn.011st.com/11dims/resize/600x600/quality/75/11src/dl/v2/9/5/6/7/1/0/Plbmi/3824956710_221035924.webp
포맷변환 명령어도 지원하고 있습니다.

3. m2live를 거치되, 강제로 원본 컨텐츠를 호출하는 방법이나 규약이 궁금합니다.
규약은 URL패턴, 헤더, IP, 프로토콜등으로 조합이 가능합니다.
아래 URL Rewrite 매뉴얼을 참고해 규칙만 설정하면 됩니다.
https://doc.m2live.co.kr/references/settings/hosting.html#urlrewrites

4. referer 헤더 등을 참조하여, 호출되는 컨텐츠의 최적화 여부를 m2live에서 판단/수행할 수 있는지 궁금합니다. CDN 레벨에서 컨트롤 할 수 있는지 검토중이나, m2live에서의 가능여부도 파악이 필요합니다.
앞서의 답변과 같이 룰만 있다면 가능합니다.
질문에도 언급주셨지만 CDN 레벨에서 컨트롤 하는 것이 더 중요해 보입니다.
referer에 따라 조건이 달라진다면 CDN에서는 같은 URL이라도 모두 다르게 캐싱해야 합니다.
CDN 관리비용이 높아지고 효율이 나빠지기 때문에 권장드리는 옵션은 아닙니다.